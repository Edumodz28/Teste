local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function CreatePlayerESP(Player)
    if Player ~= LocalPlayer then -- Evita criar uma ESP para o próprio jogador
        local Box = Instance.new("BoxHandleAdornment")
        Box.Size = Player.Character:GetExtentsSize() + Vector3.new(0.1, 0.1, 0.1)
        Box.Adornee = Player.Character
        Box.AlwaysOnTop = true
        Box.ZIndex = 5
        Box.Transparency = 0.5
        Box.Color3 = Color3.new(1, 0, 0) -- Cor vermelha para jogadores
        Box.Parent = Player.Character
    end
end

local function UpdatePlayerESP()
    for _, Player in ipairs(Players:GetPlayers()) do
        if Player.Character then
            CreatePlayerESP(Player)
        end
    end
end

Players.PlayerAdded:Connect(function(Player)
    Player.CharacterAdded:Connect(function(Character)
        wait(1) -- Espera um momento para garantir que o personagem seja totalmente carregado
        CreatePlayerESP(Player)
    end)
end)

Players.PlayerRemoving:Connect(function(Player)
    if Player.Character then
        for _, Adornment in ipairs(Player.Character:GetChildren()) do
            if Adornment:IsA("BoxHandleAdornment") then
                Adornment:Destroy()
            end
        end
    end
end)

local RemoteEvent = game.ReplicatedStorage:WaitForChild("RemoteEvent")

RemoteEvent.OnClientEvent:Connect(function(PlayerUserId)
    if PlayerUserId and type(PlayerUserId) == "number" then
        local player = Players:GetPlayerByUserId(PlayerUserId)
        if player then
            -- Aqui você pode adicionar o código para causar dano ao jogador

Remotes:FireServer(PlayerUserId)
            print("Dano causado ao jogador: " .. player.Name)
        end
    end
end)

while true do
    wait(1) -- Intervalo de atualização de 1 segundo
    UpdatePlayerESP()
end
