local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local ESPEnabled = true -- Definindo ESP como ativado por padrão

-- Velocidade do jogador (ajuste conforme necessário)
local PlayerSpeed = 50

local function DrawBoxESP(Player)
    local LocalPlayerTeam = LocalPlayer.Team
    local PlayerTeam = Player.Team
    if LocalPlayerTeam and PlayerTeam and LocalPlayerTeam ~= PlayerTeam then
        local Box = Instance.new("BoxHandleAdornment")
        Box.Size = Player.Character.HumanoidRootPart.Size + Vector3.new(0.1, 0.1, 0.1)
        Box.Adornee = Player.Character.HumanoidRootPart
        Box.AlwaysOnTop = true
        Box.ZIndex = 5
        Box.Transparency = 0.5
        Box.Color3 = Color3.new(1, 0, 0)
        Box.Parent = Player.Character.HumanoidRootPart
    end
end

local function DrawNameESP(Player)
    local LocalPlayerTeam = LocalPlayer.Team
    local PlayerTeam = Player.Team
    if LocalPlayerTeam and PlayerTeam and LocalPlayerTeam ~= PlayerTeam then
        local BillboardGui = Instance.new("BillboardGui")
        BillboardGui.Adornee = Player.Character.Head
        BillboardGui.Size = UDim2.new(0, 100, 0, 50)
        BillboardGui.StudsOffset = Vector3.new(0, 3, 0)
        BillboardGui.Parent = Player.Character.Head

        local NameLabel = Instance.new("TextLabel")
        NameLabel.Size = UDim2.new(1, 0, 1, 0)
        NameLabel.Text = Player.Name
        NameLabel.TextColor3 = Color3.new(1, 1, 1)
        NameLabel.TextStrokeTransparency = 0.5
        NameLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
        NameLabel.BackgroundTransparency = 1
        NameLabel.Parent = BillboardGui
    end
end

local function SetPlayerSpeed(speed)
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

local function DisableESP()
    for _, Player in pairs(Players:GetPlayers()) do
        if Player.Character then
            for _, obj in pairs(Player.Character:GetChildren()) do
                if obj:IsA("BoxHandleAdornment") or obj:IsA("BillboardGui") then
                    obj:Destroy()
                end
            end
        end
    end
end

local function IsPlayer(Player)
    return Player.Name ~= "" and Player.Character ~= nil
end

local function UpdateESP()
    for _, Player in pairs(Players:GetPlayers()) do
        if IsPlayer(Player) then
            DrawBoxESP(Player)
            DrawNameESP(Player)
        end
    end
end

local function AimAtTarget(Player)
    local camera = workspace.CurrentCamera
    if camera then
        local targetCharacter = Player.Character
        if targetCharacter then
            local targetHumanoidRootPart = targetCharacter:FindFirstChild("HumanoidRootPart")
            if targetHumanoidRootPart then
                local direction = (targetHumanoidRootPart.Position - camera.CFrame.Position).unit
                local ray = Ray.new(camera.CFrame.Position, direction * 1000)
                local params = RaycastParams.new()
                params.FilterType = Enum.RaycastFilterType.Blacklist
                params.FilterDescendantsInstances = {LocalPlayer.Character}
                local result = workspace:Raycast(ray, params)
                if result then
                    local hitPart = result.Instance
                    if hitPart then
                        local hitCharacter = hitPart.Parent
                        if hitCharacter and hitCharacter == targetCharacter then
                            camera.CFrame = CFrame.new(camera.CFrame.Position, result.Position)
                        end
                    end
                end
            end
        end
    end
end



local function AimBot()
    while true do
        for _, Player in pairs(Players:GetPlayers()) do
            if IsPlayer(Player) and Player.TeamColor ~= LocalPlayer.TeamColor then
                AimAtTarget(Player)
            end
        end
        wait() -- Adiciona um pequeno atraso para não sobrecarregar o sistema
    end
end

Players.PlayerAdded:Connect(function(Player)
    UpdateESP()
end)

Players.PlayerRemoving:Connect(function(Player)
    if IsPlayer(Player) then
        DisableESP()
    end
end)

-- Ativando ESP ao iniciar o script
if ESPEnabled then
    UpdateESP()
end

-- Ajustando a velocidade do jogador
SetPlayerSpeed(PlayerSpeed)

-- Iniciar o AimBot
AimBot()
