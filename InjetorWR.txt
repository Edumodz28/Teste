local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local Chat = game:GetService("Chat")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")

-- Variáveis para controle de mensagens no chat
local messageCount = 0
local messageLimit = 5
local cooldownTime = 10
local lastMessageTime = 0

-- Evento para causar dano aos jogadores e NPCs
local AttackEvent = Instance.new("BindableEvent")

-- Função para enviar mensagem para o chat com tag especial
local function SendMessage(message)
    if messageCount < messageLimit then
        local tag = "[Admin]"
        local playerName = LocalPlayer.Name
        local formattedMessage = string.format("[%s] %s: %s", tag, playerName, message)
        Chat:Chat(LocalPlayer.Character, formattedMessage)
        messageCount = messageCount + 1
    else
        local currentTime = tick()
        if currentTime - lastMessageTime >= cooldownTime then
            messageCount = 0
            lastMessageTime = currentTime
            local tag = "[Admin]"
            local playerName = LocalPlayer.Name
            local formattedMessage = string.format("[%s] %s: %s", tag, playerName, message)
            Chat:Chat(LocalPlayer.Character, formattedMessage)
            messageCount = messageCount + 1
        end
    end
end

-- Função para criar o quadrado que causa dano em uma posição específica
local function CreateDamageSquare(position)
    local damageSquare = Instance.new("Part")
    damageSquare.Size = Vector3.new(10, 1, 10) -- Ajuste o tamanho conforme necessário
    damageSquare.Anchored = true
    damageSquare.Position = position
    damageSquare.BrickColor = BrickColor.new("Bright red")
    damageSquare.Transparency = 0.5  -- Definir transparência para 50%
    damageSquare.Parent = Workspace

    -- Detectar quando um jogador ou NPC entra na área do quadrado
    damageSquare.Touched:Connect(function(hit)
        if hit.Parent and hit.Parent:IsA("Model") then
            local humanoid = hit.Parent:FindFirstChildOfClass("Humanoid")
            if humanoid and hit.Parent ~= LocalPlayer.Character then
                AttackEvent:Fire(humanoid, hit.Parent.Name) -- Disparar evento para causar dano ao jogador ou NPC
            end
        end
    end)

    return damageSquare
end

-- Disparar evento quando um jogador ou NPC é atingido pelo quadrado
AttackEvent.Event:Connect(function(humanoid, npcName)
    humanoid:TakeDamage(10) -- Causar 10 de dano ao jogador ou NPC
    SendMessage(string.format("Você causou 10 de dano a %s!", npcName)) -- Enviar mensagem com o nome do NPC
end)

-- Função para criar o quadrado de dano na posição atual do jogador
local function CreateDamageSquareAtPlayerPosition()
    local character = LocalPlayer.Character
    if character then
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoidRootPart then
            local currentPosition = humanoidRootPart.Position
            CreateDamageSquare(currentPosition)
            SendMessage("Quadrado de dano criado na posição atual do jogador.")
        end
    end
end

-- Criar botão para criar o quadrado de dano na posição atual do jogador
local function CreateButton()
    local button = Instance.new("TextButton")
    button.Text = "Criar Quadrado de Dano"
    button.Size = UDim2.new(0, 200, 0, 50)
    button.Position = UDim2.new(0.5, -100, 0.9, 0)
    button.Parent = game.Players.LocalPlayer.PlayerGui.ScreenGui -- Altere "ScreenGui" para o nome do seu GUI
    button.MouseButton1Click:Connect(function()
        CreateDamageSquareAtPlayerPosition()
    end)
end

-- Criar o botão na inicialização
CreateButton()

-- Speed
local function SetPlayerSpeed(speed)
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

-- Ativar o Speed
SetPlayerSpeed(100) -- Definindo a velocidade do jogador como 100
