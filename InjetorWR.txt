local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Team = LocalPlayer.TeamColor


local ESPEnabled = true -- Definindo ESP como ativado por padrÃ£o

local function ESP(Player)
    if Player.TeamColor ~= Team then
        local Box = Instance.new("BoxHandleAdornment")
        Box.Size = Player.Character.HumanoidRootPart.Size + Vector3.new(0.1, 0.1, 0.1)
        Box.Adornee = Player.Character.HumanoidRootPart
        Box.AlwaysOnTop = true
        Box.ZIndex = 5
        Box.Transparency = 0.5
        Box.Color3 = Color3.new(1, 0, 0)
        Box.Parent = Player.Character.HumanoidRootPart
    end
end

local function FOV(Player)
    if Player.TeamColor ~= Team then
        local FOV = Instance.new("SelectionBox")
        FOV.LineThickness = 0.05
        FOV.Color3 = Color3.new(1, 0, 0)
        FOV.Transparency = 0.5
        FOV.Adornee = Player.Character.HumanoidRootPart
        FOV.Parent = Player.Character.HumanoidRootPart
    end
end

local function TeleportToPlayer(Player)
    local character = LocalPlayer.Character
    local targetCharacter = Player.Character
    if character and targetCharacter then
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        local targetHumanoidRootPart = targetCharacter:FindFirstChild("HumanoidRootPart")
        if humanoidRootPart and targetHumanoidRootPart then
            humanoidRootPart.CFrame = targetHumanoidRootPart.CFrame
        end
    end
end

local function DisableESP()
    for _, Player in pairs(Players:GetPlayers()) do
        if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
            local espAdornment = Player.Character.HumanoidRootPart:FindFirstChildOfClass("BoxHandleAdornment")
            if espAdornment then
                espAdornment:Destroy()
            end
        end
    end
end

local function DisableFOV()
    for _, Player in pairs(Players:GetPlayers()) do
        if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
            local fovBox = Player.Character.HumanoidRootPart:FindFirstChildOfClass("SelectionBox")
            if fovBox then
                fovBox:Destroy()
            end
        end
    end
end

local function AimAt(Player)
    local character = LocalPlayer.Character
    local targetCharacter = Player.Character
    if character and targetCharacter then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local targetHumanoid = targetCharacter:FindFirstChildOfClass("Humanoid")
        if humanoid and targetHumanoid then
            local torso = character:FindFirstChild("HumanoidRootPart")
            local targetTorso = targetCharacter:FindFirstChild("HumanoidRootPart")
            if torso and targetTorso then
                local direction = (targetTorso.Position - torso.Position).unit
                humanoid.CameraOffset = direction * 5
                humanoid:Move(direction * 500)
                wait(0.5)
                humanoid:Move(Vector3.new(0, 0, 0))
                humanoid.CameraOffset = Vector3.new(0, 0, 0)
            end
        end
    end
end

Players.PlayerAdded:Connect(function(Player)
    ESP(Player)
    FOV(Player)
end)

Players.PlayerRemoving:Connect(function(Player)
    if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        local espAdornment = Player.Character.HumanoidRootPart:FindFirstChildOfClass("BoxHandleAdornment")
        local fovBox = Player.Character.HumanoidRootPart:FindFirstChildOfClass("SelectionBox")
        if espAdornment then
            espAdornment:Destroy()
        end
        if fovBox then
            fovBox:Destroy()
        end
    end
end)

-- Ativando ESP ao iniciar o script
if ESPEnabled then
    for _, Player in pairs(Players:GetPlayers()) do
        ESP(Player)
        FOV(Player)
    end
end

-- Teleportando automaticamente para jogadores (exceto da mesma equipe) e implementando o aim bot
while true do
    wait(5) -- Espera 5 segundos antes de teleportar novamente
    local enemyPlayers = {}
    for _, Player in pairs(Players:GetPlayers()) do
        if Player.TeamColor ~= Team then
            table.insert(enemyPlayers, Player)
        end
    end
    if #enemyPlayers > 0 then
        local randomPlayer = enemyPlayers[math.random(1, #enemyPlayers)]
        TeleportToPlayer(randomPlayer)
        AimAt(randomPlayer)
    end
end
