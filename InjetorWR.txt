local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local ESPEnabled = true -- Definindo ESP como ativado por padrão

-- Velocidade do jogador (ajuste conforme necessário)
local PlayerSpeed = 50

local DamageRadius = 1000 -- Raio de alcance do dano

local function DrawBoxESP(Player)
    if Player.TeamColor ~= LocalPlayer.TeamColor then
        local Box = Instance.new("BoxHandleAdornment")
        Box.Size = Player.Character.HumanoidRootPart.Size + Vector3.new(0.1, 0.1, 0.1)
        Box.Adornee = Player.Character.HumanoidRootPart
        Box.AlwaysOnTop = true
        Box.ZIndex = 5
        Box.Transparency = 0.5
        Box.Color3 = Color3.new(1, 0, 0)
        Box.Parent = Player.Character.HumanoidRootPart
    end
end

local function DrawNameESP(Player)
    -- Lógica para desenhar o ESP do nome aqui
end

local function DrawESP(Player)
    DrawBoxESP(Player)
    DrawNameESP(Player)
end

local function SetPlayerSpeed(speed)
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

local function DisableESP()
    for _, Player in pairs(Players:GetPlayers()) do
        if Player.Character then
            local espAdornment = Player.Character:FindFirstChildOfClass("BoxHandleAdornment")
            if espAdornment then
                espAdornment:Destroy()
            end
        end
    end
end

local function IsPlayer(Player)
    return Player.Name ~= ""
end

local function UpdateESP()
    for _, Player in pairs(Players:GetPlayers()) do
        if IsPlayer(Player) then
            DrawESP(Player)
        end
    end
end

local function DamagePlayersInRadius(Position, Radius)
    for _, Player in pairs(Players:GetPlayers()) do
        if IsPlayer(Player) then
            local Character = Player.Character
            if Character then
                local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
                if HumanoidRootPart then
                    local Distance = (Position - HumanoidRootPart.Position).magnitude
                    if Distance <= Radius then
                        -- Se o jogador estiver dentro do raio, você pode adicionar sua lógica de aplicação de dano aqui
                        print("Player: " .. Player.Name .. " dentro do raio de dano!")
                    end
                end
            end
        end
    end
end

Players.PlayerAdded:Connect(function(Player)
    UpdateESP()
end)

Players.PlayerRemoving:Connect(function(Player)
    if IsPlayer(Player) then
        DisableESP()
    end
end)

-- Ativando ESP ao iniciar o script
if ESPEnabled then
    UpdateESP()
end

-- Ajustando a velocidade do jogador
SetPlayerSpeed(PlayerSpeed)

-- Exemplo de como chamar a função de dano dentro de um loop
while true do
    wait(1) -- Espera 1 segundo antes de verificar novamente
    local Position = LocalPlayer.Character and LocalPlayer.Character.HumanoidRootPart.Position
    if Position then
        DamagePlayersInRadius(Position, DamageRadius)
    end
end
