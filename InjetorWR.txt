local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local UserInputService = game:GetService("UserInputService")
local Camera = game.Workspace.CurrentCamera
local Chat = game:GetService("Chat")

-- Criar uma tela de GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer.PlayerGui

-- Criar um frame para o layout
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 200)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 2
frame.Parent = ScreenGui

-- Label para a lista de jogadores
local playerListLabel = Instance.new("TextLabel")
playerListLabel.Text = "Lista de Jogadores:"
playerListLabel.Position = UDim2.new(0, 10, 0, 10)
playerListLabel.Size = UDim2.new(0, 280, 0, 20)
playerListLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
playerListLabel.Parent = frame

-- Frame para a lista de jogadores
local playerListFrame = Instance.new("Frame")
playerListFrame.Position = UDim2.new(0, 10, 0, 40)
playerListFrame.Size = UDim2.new(0, 280, 0, 120)
playerListFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
playerListFrame.Parent = frame

-- Campo de texto para inserir o ID do jogador
local idInput = Instance.new("TextBox")
idInput.PlaceholderText = "Insira o ID do jogador"
idInput.Position = UDim2.new(0, 10, 0, 170)
idInput.Size = UDim2.new(0, 200, 0, 20)
idInput.TextColor3 = Color3.fromRGB(255, 255, 255)
idInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
idInput.Parent = frame

-- Botão para observar o jogador pelo ID inserido
local observeButton = Instance.new("TextButton")
observeButton.Text = "Observar"
observeButton.Position = UDim2.new(0, 220, 0, 170)
observeButton.Size = UDim2.new(0, 60, 0, 20)
observeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
observeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
observeButton.Parent = frame

-- Variável para armazenar o jogador selecionado
local selectedPlayer = nil

-- Função para enviar mensagem indicando que o usuário está observando um jogador
local function SendMessage(message)
    local tag = "[Admin]"
    local playerName = LocalPlayer.Name
    local formattedMessage = string.format("[%s] %s: %s", tag, playerName, message)
    Chat:Chat(LocalPlayer.Character, formattedMessage)
end

-- Função para atualizar a lista de jogadores
local function updatePlayerList()
    for _, child in ipairs(playerListFrame:GetChildren()) do
        if child:IsA("TextLabel") then
            child:Destroy()
        end
    end

    local yPosition = 5
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local playerLabel = Instance.new("TextLabel")
            playerLabel.Text = string.format("[%s] %s", player.UserId, player.Name)
            playerLabel.Position = UDim2.new(0, 5, 0, yPosition)
            playerLabel.Size = UDim2.new(0, 270, 0, 20)
            playerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            playerLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            playerLabel.Parent = playerListFrame

            playerLabel.MouseButton1Click:Connect(function()
                selectedPlayer = player
                observePlayer(player)
                SendMessage("O usuário " .. LocalPlayer.Name .. " está observando o jogador " .. player.Name) -- Enviar mensagem indicando que o usuário está observando esse jogador
            end)

            yPosition = yPosition + 25
        end
    end
end

-- Função para observar um jogador
local function observePlayer(player)
    -- Parar de observar o jogador anterior
    if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local humanoidRootPart = selectedPlayer.Character.HumanoidRootPart
        Camera.CameraSubject = humanoidRootPart
    end
end

-- Função para observar um jogador pelo ID inserido
local function observePlayerById(playerId)
    local player = Players:GetPlayerByUserId(playerId)
    if player then
        selectedPlayer = player
        observePlayer(player)
        SendMessage("O usuário " .. LocalPlayer.Name .. " está observando o jogador " .. player.Name) -- Enviar mensagem indicando que o usuário está observando esse jogador
    else
        SendMessage("O ID do jogador não foi encontrado.")
    end
end

-- Conectar o botão de observar ao observar o jogador pelo ID inserido
observeButton.MouseButton1Click:Connect(function()
    local playerId = tonumber(idInput.Text)
    if playerId then
        observePlayerById(playerId)
    else
        SendMessage("ID do jogador inválido.")
    end
end)

-- Atualizar a lista de jogadores quando um jogador entra ou sai do jogo
Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)

-- Atualizar a lista de jogadores inicialmente
updatePlayerList()
