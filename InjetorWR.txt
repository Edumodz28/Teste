--Abaixo estará Lib da nossa Ui

local Lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TeleportDistance = 70


local UI = Lib:Create{
    Theme = "Dark", -- or any other theme
    Size = UDim2.new(0, 1, 0, 1) -- default
 }
 
 
 
 local QuitDivider = Main:Divider{
    Name = "Sair"
 }

 


local function teleportToPlayer(targetPlayer)
    local player = game.Players.LocalPlayer
    local character = player.Character

    if character then
        local targetCharacter = targetPlayer.Character

        if targetCharacter then
            player.Character:SetPrimaryPartCFrame(CFrame.new(targetCharacter.HumanoidRootPart.Position))
        end
    end
end

local function onPlayerAdded(player)
    player.CharacterAdded:Connect(function()
        local myHumanoid = player.Character:WaitForChild("Humanoid")

        myHumanoid.Died:Connect(function()
            -- O jogador morreu, teleporte para outro jogador aqui
            local nearestEnemy = findNearestEnemy()  -- Você pode usar a função findNearestEnemy do exemplo anterior
            if nearestEnemy then
                teleportToPlayer(nearestEnemy)
            end
        end)
    end)
end

local function findNearestEnemy()
    local player = game.Players.LocalPlayer
    local players = game.Players:GetPlayers()

    local closestEnemy = nil
    local shortestDistance = TeleportDistance

    for _, otherPlayer in pairs(players) do
        if otherPlayer ~= player then
            local distance = (player.Character and otherPlayer.Character) and
                             (player.Character:FindFirstChild("Humanoid").RootPart.Position - otherPlayer.Character:FindFirstChild("Humanoid").RootPart.Position).Magnitude or TeleportDistance

            if distance < shortestDistance then
                shortestDistance = distance
                closestEnemy = otherPlayer
            end
        end
    end

    return closestEnemy
end

Players.PlayerAdded:Connect(onPlayerAdded)
