local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")

-- Função para trocar a animação de todos os jogadores para "morto"
local function PlayDeathAnimation()
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character:FindFirstChild("Humanoid"):LoadAnimation(Instance.new("Animation"))
            player.Character.Humanoid:Move(Vector3.new(0,0,0))
            player.Character.Humanoid:Move(Vector3.new(0,-1,0))
        end
    end
end

-- Função para ativar/desativar a capacidade de atravessar paredes
local function ToggleWallCollision()
    for _, part in ipairs(Workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = not part.CanCollide
        end
    end
end

-- Função para tornar o jogador invisível
local function ToggleInvisibility()
    for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 1
            part.Reflectance = 0
        end
    end
end

-- Função para clonar objetos que o jogador já pegou
local function ClonePickedObjects()
    local pickedObjects = {}  -- Armazenar referências aos objetos pegos pelo jogador

    -- Encontrar e armazenar referências aos objetos pegos pelo jogador
    for _, obj in ipairs(Workspace:GetChildren()) do
        if obj:IsA("Model") and obj:IsDescendantOf(LocalPlayer) then
            table.insert(pickedObjects, obj:Clone())
        end
    end

    -- Clonar os objetos armazenados e colocá-los na mesma posição que o jogador
    for _, obj in ipairs(pickedObjects) do
        obj.Parent = Workspace
        obj:SetPrimaryPartCFrame(LocalPlayer.Character.HumanoidRootPart.CFrame)
    end
end

-- Função para executar ações com base na tecla pressionada
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Q then
        PlayDeathAnimation()
    elseif input.KeyCode == Enum.KeyCode.W then
        ToggleWallCollision()
    elseif input.KeyCode == Enum.KeyCode.E then
        ToggleInvisibility()
    elseif input.KeyCode == Enum.KeyCode.R then
        ClonePickedObjects()
    end
end)
